#!/usr/bin/env python

import subprocess

count = 1

def decompress(file):
    if len(file.split('zip')) > 1 or len(file.split('kz3')) > 1:
        subprocess.getoutput('unzip ./%d/%s'%(count, file))
    elif len(file.split('tar.bz2')) > 1:
        subprocess.getoutput('tar xjvf ./%d/%s'%(count, file))
    elif len(file.split('tar.gz')) > 1:
        subprocess.getoutput('tar xjvf ./%d/%s'%(count, file))
    elif len(file.split('tar')) > 1:
        subprocess.getoutput('tar xjvf ./%d/%s'%(count, file))
    elif len(file.split('rar')) > 1:
        subprocess.getoutput('unrar ./%d/%s'%(count, file))
    else:
        print("Extension not found!")
        exit()

while True:
    try:
        print("count:", count)
        file = subprocess.getoutput('ls ./%d | grep -v %d.txt'%(count, count)) 
        decompress(file)
    
        flag = subprocess.getoutput('cat ./%d/%d.txt'%(count, count))
        if flag != "tjctf{n0t_th3_fl4g}":
            print("Flag:", flag)
            break
        
        count += 1
    except:
        break
    

